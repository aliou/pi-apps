import{a as t,w as k,p as e}from"./chunk-JZWAC4HX-C2HxCtkE.js";import{o as w}from"./Cube.es-D5r-YLoI.js";import{p as A}from"./IconBase.es-DtVVdnrS.js";import{e as E}from"./Plus.es-Dqerg60a.js";import{r as C}from"./Trash.es-ClMuyJ1A.js";import{e as D}from"./X.es-DB1gPyp-.js";import{a as L}from"./api-D4ha4czi.js";const F=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M230.14,70.54,185.46,25.85a20,20,0,0,0-28.29,0L33.86,149.17A19.85,19.85,0,0,0,28,163.31V208a20,20,0,0,0,20,20H92.69a19.86,19.86,0,0,0,14.14-5.86L230.14,98.82a20,20,0,0,0,0-28.28ZM91,204H52V165l84-84,39,39ZM192,103,153,64l18.34-18.34,39,39Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M221.66,90.34,192,120,136,64l29.66-29.66a8,8,0,0,1,11.31,0L221.66,79A8,8,0,0,1,221.66,90.34Z",opacity:"0.2"}),t.createElement("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.68,147.31,64l24-24L216,84.68Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM192,108.68,147.31,64l24-24L216,84.68Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M225.9,74.78,181.21,30.09a14,14,0,0,0-19.8,0L38.1,153.41a13.94,13.94,0,0,0-4.1,9.9V208a14,14,0,0,0,14,14H92.69a13.94,13.94,0,0,0,9.9-4.1L225.9,94.58a14,14,0,0,0,0-19.8ZM94.1,209.41a2,2,0,0,1-1.41.59H48a2,2,0,0,1-2-2V163.31a2,2,0,0,1,.59-1.41L136,72.48,183.51,120ZM217.41,86.1,192,111.51,144.49,64,169.9,38.58a2,2,0,0,1,2.83,0l44.68,44.69a2,2,0,0,1,0,2.83Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.68,147.31,64l24-24L216,84.68Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224.49,76.2,179.8,31.51a12,12,0,0,0-17,0L133.17,61.17h0L39.52,154.83A11.9,11.9,0,0,0,36,163.31V208a12,12,0,0,0,12,12H92.69a12,12,0,0,0,8.48-3.51L224.48,93.17a12,12,0,0,0,0-17Zm-129,134.63A4,4,0,0,1,92.69,212H48a4,4,0,0,1-4-4V163.31a4,4,0,0,1,1.17-2.83L136,69.65,186.34,120ZM218.83,87.51,192,114.34,141.66,64l26.82-26.83a4,4,0,0,1,5.66,0l44.69,44.68a4,4,0,0,1,0,5.66Z"}))]]),z=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M243,96a20.33,20.33,0,0,0-17.74-14l-56.59-4.57L146.83,24.62a20.36,20.36,0,0,0-37.66,0L87.35,77.44,30.76,82A20.45,20.45,0,0,0,19.1,117.88l43.18,37.24-13.2,55.7A20.37,20.37,0,0,0,79.57,233L128,203.19,176.43,233a20.39,20.39,0,0,0,30.49-22.15l-13.2-55.7,43.18-37.24A20.43,20.43,0,0,0,243,96ZM172.53,141.7a12,12,0,0,0-3.84,11.86L181.58,208l-47.29-29.08a12,12,0,0,0-12.58,0L74.42,208l12.89-54.4a12,12,0,0,0-3.84-11.86L41.2,105.24l55.4-4.47a12,12,0,0,0,10.13-7.38L128,41.89l21.27,51.5a12,12,0,0,0,10.13,7.38l55.4,4.47Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M229.06,108.79l-48.7,42,14.88,62.79a8.4,8.4,0,0,1-12.52,9.17L128,189.09,73.28,222.74a8.4,8.4,0,0,1-12.52-9.17l14.88-62.79-48.7-42A8.46,8.46,0,0,1,31.73,94L95.64,88.8l24.62-59.6a8.36,8.36,0,0,1,15.48,0l24.62,59.6L224.27,94A8.46,8.46,0,0,1,229.06,108.79Z",opacity:"0.2"}),t.createElement("path",{d:"M239.18,97.26A16.38,16.38,0,0,0,224.92,86l-59-4.76L143.14,26.15a16.36,16.36,0,0,0-30.27,0L90.11,81.23,31.08,86a16.46,16.46,0,0,0-9.37,28.86l45,38.83L53,211.75a16.38,16.38,0,0,0,24.5,17.82L128,198.49l50.53,31.08A16.4,16.4,0,0,0,203,211.75l-13.76-58.07,45-38.83A16.43,16.43,0,0,0,239.18,97.26Zm-15.34,5.47-48.7,42a8,8,0,0,0-2.56,7.91l14.88,62.8a.37.37,0,0,1-.17.48c-.18.14-.23.11-.38,0l-54.72-33.65a8,8,0,0,0-8.38,0L69.09,215.94c-.15.09-.19.12-.38,0a.37.37,0,0,1-.17-.48l14.88-62.8a8,8,0,0,0-2.56-7.91l-48.7-42c-.12-.1-.23-.19-.13-.5s.18-.27.33-.29l63.92-5.16A8,8,0,0,0,103,91.86l24.62-59.61c.08-.17.11-.25.35-.25s.27.08.35.25L153,91.86a8,8,0,0,0,6.75,4.92l63.92,5.16c.15,0,.24,0,.33.29S224,102.63,223.84,102.73Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M234.29,114.85l-45,38.83L203,211.75a16.4,16.4,0,0,1-24.5,17.82L128,198.49,77.47,229.57A16.4,16.4,0,0,1,53,211.75l13.76-58.07-45-38.83A16.46,16.46,0,0,1,31.08,86l59-4.76,22.76-55.08a16.36,16.36,0,0,1,30.27,0l22.75,55.08,59,4.76a16.46,16.46,0,0,1,9.37,28.86Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M237.28,97.87A14.18,14.18,0,0,0,224.76,88l-60.25-4.87-23.22-56.2a14.37,14.37,0,0,0-26.58,0L91.49,83.11,31.24,88a14.18,14.18,0,0,0-12.52,9.89A14.43,14.43,0,0,0,23,113.32L69,152.93l-14,59.25a14.4,14.4,0,0,0,5.59,15,14.1,14.1,0,0,0,15.91.6L128,196.12l51.58,31.71a14.1,14.1,0,0,0,15.91-.6,14.4,14.4,0,0,0,5.59-15l-14-59.25L233,113.32A14.43,14.43,0,0,0,237.28,97.87Zm-12.14,6.37-48.69,42a6,6,0,0,0-1.92,5.92l14.88,62.79a2.35,2.35,0,0,1-.95,2.57,2.24,2.24,0,0,1-2.6.1L131.14,184a6,6,0,0,0-6.28,0L70.14,217.61a2.24,2.24,0,0,1-2.6-.1,2.35,2.35,0,0,1-1-2.57l14.88-62.79a6,6,0,0,0-1.92-5.92l-48.69-42a2.37,2.37,0,0,1-.73-2.65,2.28,2.28,0,0,1,2.07-1.65l63.92-5.16a6,6,0,0,0,5.06-3.69l24.63-59.6a2.35,2.35,0,0,1,4.38,0l24.63,59.6a6,6,0,0,0,5.06,3.69l63.92,5.16a2.28,2.28,0,0,1,2.07,1.65A2.37,2.37,0,0,1,225.14,104.24Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M239.18,97.26A16.38,16.38,0,0,0,224.92,86l-59-4.76L143.14,26.15a16.36,16.36,0,0,0-30.27,0L90.11,81.23,31.08,86a16.46,16.46,0,0,0-9.37,28.86l45,38.83L53,211.75a16.38,16.38,0,0,0,24.5,17.82L128,198.49l50.53,31.08A16.4,16.4,0,0,0,203,211.75l-13.76-58.07,45-38.83A16.43,16.43,0,0,0,239.18,97.26Zm-15.34,5.47-48.7,42a8,8,0,0,0-2.56,7.91l14.88,62.8a.37.37,0,0,1-.17.48c-.18.14-.23.11-.38,0l-54.72-33.65a8,8,0,0,0-8.38,0L69.09,215.94c-.15.09-.19.12-.38,0a.37.37,0,0,1-.17-.48l14.88-62.8a8,8,0,0,0-2.56-7.91l-48.7-42c-.12-.1-.23-.19-.13-.5s.18-.27.33-.29l63.92-5.16A8,8,0,0,0,103,91.86l24.62-59.61c.08-.17.11-.25.35-.25s.27.08.35.25L153,91.86a8,8,0,0,0,6.75,4.92l63.92,5.16c.15,0,.24,0,.33.29S224,102.63,223.84,102.73Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M235.36,98.49A12.21,12.21,0,0,0,224.59,90l-61.47-5L139.44,27.67a12.37,12.37,0,0,0-22.88,0L92.88,85,31.41,90a12.45,12.45,0,0,0-7.07,21.84l46.85,40.41L56.87,212.64a12.35,12.35,0,0,0,18.51,13.49L128,193.77l52.62,32.36a12.12,12.12,0,0,0,13.69-.51,12.28,12.28,0,0,0,4.82-13l-14.32-60.42,46.85-40.41A12.29,12.29,0,0,0,235.36,98.49Zm-8.93,7.26-48.68,42a4,4,0,0,0-1.28,3.95l14.87,62.79a4.37,4.37,0,0,1-1.72,4.65,4.24,4.24,0,0,1-4.81.18L130.1,185.67a4,4,0,0,0-4.2,0L71.19,219.32a4.24,4.24,0,0,1-4.81-.18,4.37,4.37,0,0,1-1.72-4.65L79.53,151.7a4,4,0,0,0-1.28-3.95l-48.68-42A4.37,4.37,0,0,1,28.25,101a4.31,4.31,0,0,1,3.81-3L96,92.79a4,4,0,0,0,3.38-2.46L124,30.73a4.35,4.35,0,0,1,8.08,0l24.62,59.6A4,4,0,0,0,160,92.79l63.9,5.15a4.31,4.31,0,0,1,3.81,3A4.37,4.37,0,0,1,226.43,105.75Z"}))]]),Z=t.forwardRef((a,n)=>t.createElement(A,{ref:n,...a,weights:F}));Z.displayName="PencilSimpleIcon";const M=t.forwardRef((a,n)=>t.createElement(A,{ref:n,...a,weights:z}));M.displayName="StarIcon";function H({environment:a,images:n,onSave:f,onClose:o}){var N,v,y;const d=!!a,[c,m]=t.useState((a==null?void 0:a.name)??""),[r,h]=t.useState((a==null?void 0:a.config.image)??((N=n[0])==null?void 0:N.image)??""),[b,g]=t.useState((a==null?void 0:a.isDefault)??!1),[x,u]=t.useState(!1),p=async s=>{if(s.preventDefault(),!(!c.trim()||!r)){u(!0);try{if(d){const j={name:c.trim(),config:{image:r},isDefault:b};await f(j)}else{const j={name:c.trim(),sandboxType:"docker",config:{image:r},isDefault:b};await f(j)}}finally{u(!1)}}};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("button",{type:"button","aria-label":"Close dialog",tabIndex:-1,className:"absolute inset-0 bg-black/50 backdrop-blur-[2px]",onClick:o}),e.jsxs("div",{className:"relative z-10 w-full max-w-md rounded-xl border border-border bg-bg p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between",children:[e.jsx("h2",{className:"text-base font-semibold text-fg",children:d?"Edit Environment":"Create Environment"}),e.jsx("button",{type:"button",onClick:o,className:"rounded-md p-1 text-muted hover:text-fg",children:e.jsx(D,{className:"size-4"})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"env-name",className:"mb-1.5 block text-xs font-medium text-muted",children:"Name"}),e.jsx("input",{id:"env-name",type:"text",value:c,onChange:s=>m(s.target.value),placeholder:"e.g. Default, Python Dev, Node.js",className:"w-full rounded-lg border border-border bg-surface/30 px-3 py-2 text-sm text-fg placeholder:text-muted/50 focus:border-accent focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"env-image",className:"mb-1.5 block text-xs font-medium text-muted",children:"Docker Image"}),e.jsx("select",{id:"env-image",value:r,onChange:s=>h(s.target.value),className:"w-full rounded-lg border border-border bg-surface/30 px-3 py-2 text-sm text-fg focus:border-accent focus:outline-none",children:n.map(s=>e.jsx("option",{value:s.image,children:s.name},s.id))}),((v=n.find(s=>s.image===r))==null?void 0:v.description)&&e.jsx("p",{className:"mt-1 text-xs text-muted",children:(y=n.find(s=>s.image===r))==null?void 0:y.description})]}),e.jsxs("label",{htmlFor:"env-default",className:"flex items-center gap-2.5 rounded-lg border border-border bg-surface/30 px-3 py-2.5",children:[e.jsx("input",{id:"env-default",type:"checkbox",checked:b,onChange:s=>g(s.target.checked),className:"size-4 rounded border-border accent-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-fg",children:"Set as default"}),e.jsx("p",{className:"text-xs text-muted",children:"Used when no environment is specified for new sessions."})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:o,className:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-muted transition-colors hover:text-fg",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!c.trim()||!r||x,className:"flex items-center gap-1.5 rounded-lg bg-accent px-4 py-2 text-sm font-medium text-white transition-opacity hover:opacity-90 disabled:opacity-50",children:x?"Saving...":d?"Update":"Create"})]})]})]})]})}function V({environment:a,images:n,onEdit:f,onDelete:o}){const[d,c]=t.useState(!1),m=n.find(h=>h.image===a.config.image),r=async()=>{confirm(`Delete environment "${a.name}"?`)&&(c(!0),o(a.id))};return e.jsxs("div",{className:"flex items-center gap-4 rounded-lg border border-border bg-surface/30 p-4",children:[e.jsx("div",{className:"flex size-10 shrink-0 items-center justify-center rounded-lg bg-accent/10 text-accent",children:e.jsx(w,{className:"size-5",weight:"duotone"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-fg",children:a.name}),a.isDefault&&e.jsxs("span",{className:"flex items-center gap-1 rounded-full bg-amber-500/10 px-2 py-0.5 text-xs text-amber-500",children:[e.jsx(M,{className:"size-3",weight:"fill"}),"Default"]})]}),e.jsx("p",{className:"mt-0.5 text-xs text-muted",children:(m==null?void 0:m.name)??a.config.image})]}),e.jsxs("div",{className:"flex shrink-0 items-center gap-1.5",children:[e.jsx("button",{type:"button",onClick:()=>f(a),className:"rounded-md p-1.5 text-muted transition-colors hover:bg-surface hover:text-fg",title:"Edit",children:e.jsx(Z,{className:"size-4"})}),e.jsx("button",{type:"button",onClick:r,disabled:d,className:"rounded-md p-1.5 text-muted transition-colors hover:bg-red-500/10 hover:text-red-500 disabled:opacity-50",title:"Delete",children:e.jsx(C,{className:"size-4"})})]})]})}const T=k(function(){const[n,f]=t.useState([]),[o,d]=t.useState([]),[c,m]=t.useState(!0),[r,h]=t.useState(null),[b,g]=t.useState(!1),[x,u]=t.useState(),p=t.useCallback(async()=>{const[l,i]=await Promise.all([L.get("/environments"),L.get("/environments/images")]);l.error?h(l.error):l.data&&f(l.data),i.data&&d(i.data),m(!1)},[]);t.useEffect(()=>{p()},[p]);const N=async l=>{const i=await L.post("/environments",l);if(i.error){alert(`Failed to create: ${i.error}`);return}g(!1),await p()},v=async l=>{if(!x)return;const i=await L.put(`/environments/${x.id}`,l);if(i.error){alert(`Failed to update: ${i.error}`);return}u(void 0),await p()},y=async l=>{const i=await L.delete(`/environments/${l}`);if(i.error){alert(`Failed to delete: ${i.error}`);return}await p()},s=()=>{u(void 0),g(!0)},j=l=>{u(l),g(!0)},S=()=>{g(!1),u(void 0)};return e.jsxs("div",{className:"mx-auto max-w-2xl",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-fg",children:"Environments"}),e.jsx("p",{className:"mt-1 text-sm text-muted",children:"Sandbox configurations for code sessions."})]}),e.jsxs("button",{type:"button",onClick:s,className:"flex items-center gap-1.5 rounded-lg bg-accent px-3 py-2 text-sm font-medium text-white transition-opacity hover:opacity-90",children:[e.jsx(E,{className:"size-4",weight:"bold"}),"New Environment"]})]}),c?e.jsx("div",{className:"py-12 text-center text-sm text-muted",children:"Loading..."}):r?e.jsx("div",{className:"rounded-lg border border-red-500/30 bg-red-500/5 p-4 text-sm text-red-500",children:r}):n.length===0?e.jsxs("div",{className:"rounded-xl border border-dashed border-border p-12 text-center",children:[e.jsx(w,{className:"mx-auto mb-3 size-10 text-muted/50"}),e.jsx("p",{className:"text-sm font-medium text-fg",children:"No environments yet"}),e.jsx("p",{className:"mt-1 text-xs text-muted",children:"Create an environment to configure sandbox settings for sessions."}),e.jsxs("button",{type:"button",onClick:s,className:"mt-4 inline-flex items-center gap-1.5 rounded-lg bg-accent px-3 py-2 text-sm font-medium text-white transition-opacity hover:opacity-90",children:[e.jsx(E,{className:"size-4",weight:"bold"}),"Create Environment"]})]}):e.jsx("div",{className:"space-y-3",children:n.map(l=>e.jsx(V,{environment:l,images:o,onEdit:j,onDelete:y},l.id))}),b&&e.jsx(H,{environment:x,images:o,onSave:x?v:N,onClose:S})]})});export{T as default};
